<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrapæ ‡ç­¾é¡µä¿®å¤æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            padding: 20px;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">Bootstrapæ ‡ç­¾é¡µä¿®å¤æµ‹è¯•</h1>

        <!-- æµ‹è¯•çŠ¶æ€ -->
        <div id="test-status" class="test-result info">
            <h5>ğŸ”„ æ­£åœ¨æµ‹è¯•...</h5>
            <p>æ£€æŸ¥Bootstrapæ ‡ç­¾é¡µæ˜¯å¦æ­£å¸¸å·¥ä½œ...</p>
        </div>

        <!-- ä¿®å¤è¯´æ˜ -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>ğŸ› ï¸ ä¿®å¤å†…å®¹</h5>
            </div>
            <div class="card-body">
                <ul>
                    <li><strong>é—®é¢˜ï¼š</strong> selector-engine.js:37 Uncaught TypeError: Illegal invocation</li>
                    <li><strong>åŸå› ï¼š</strong> Bootstrap 5æ ‡ç­¾é¡µç»„ä»¶åˆå§‹åŒ–é”™è¯¯</li>
                    <li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                        <ul>
                            <li>å°†å¯¼èˆªé“¾æ¥ä» `<a>` æ”¹ä¸º `<button>` æ ‡ç­¾</li>
                            <li>ä½¿ç”¨æ­£ç¡®çš„ `data-bs-target` å±æ€§</li>
                            <li>ç§»é™¤æ‰‹åŠ¨çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œä½¿ç”¨BootstrapåŸç”Ÿäº‹ä»¶</li>
                            <li>ç¡®ä¿æ‰€æœ‰ARIAå±æ€§æ­£ç¡®è®¾ç½®</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- æ ‡ç­¾é¡µæµ‹è¯• -->
        <div class="card">
            <div class="card-header">
                <h5>ğŸ“‹ æ ‡ç­¾é¡µåŠŸèƒ½æµ‹è¯•</h5>
            </div>
            <div class="card-body">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">
                            <i class="fas fa-home"></i> æ€»è§ˆ
                        </button>
                        <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">
                            <i class="fas fa-user"></i> èµ„æ–™
                        </button>
                        <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">
                            <i class="fas fa-envelope"></i> è”ç³»
                        </button>
                    </div>
                </nav>

                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                        <div class="p-3">
                            <h4>ğŸ  æ€»è§ˆæ ‡ç­¾é¡µ</h4>
                            <p>è¿™æ˜¯æ€»è§ˆæ ‡ç­¾é¡µçš„å†…å®¹ã€‚</p>
                            <div class="alert alert-success">
                                âœ… å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜æ ‡ç­¾é¡µåˆ‡æ¢æ­£å¸¸å·¥ä½œï¼
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                        <div class="p-3">
                            <h4>ğŸ‘¤ èµ„æ–™æ ‡ç­¾é¡µ</h4>
                            <p>è¿™æ˜¯èµ„æ–™æ ‡ç­¾é¡µçš„å†…å®¹ã€‚</p>
                            <div class="alert alert-info">
                                â„¹ï¸ æˆåŠŸåˆ‡æ¢åˆ°èµ„æ–™æ ‡ç­¾é¡µï¼
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                        <div class="p-3">
                            <h4>ğŸ“§ è”ç³»æ ‡ç­¾é¡µ</h4>
                            <p>è¿™æ˜¯è”ç³»æ ‡ç­¾é¡µçš„å†…å®¹ã€‚</p>
                            <div class="alert alert-warning">
                                âš ï¸ æˆåŠŸåˆ‡æ¢åˆ°è”ç³»æ ‡ç­¾é¡µï¼
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•æ—¥å¿— -->
        <div class="card mt-4">
            <div class="card-header">
                <h5>ğŸ“ æµ‹è¯•æ—¥å¿—</h5>
            </div>
            <div class="card-body">
                <div id="test-log" class="font-monospace small">
                    æµ‹è¯•å¼€å§‹...<br>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // æµ‹è¯•ç»“æœ
        let testResults = {
            bootstrap: false,
            tabs: false,
            events: false
        };

        // æ›´æ–°æµ‹è¯•çŠ¶æ€
        function updateTestStatus() {
            const statusDiv = document.getElementById('test-status');
            const allPassed = Object.values(testResults).every(result => result);

            if (allPassed) {
                statusDiv.className = 'test-result success';
                statusDiv.innerHTML = `
                    <h5>âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼</h5>
                    <p>Bootstrapæ ‡ç­¾é¡µä¿®å¤æˆåŠŸï¼</p>
                `;
            } else {
                statusDiv.className = 'test-result info';
                statusDiv.innerHTML = `
                    <h5>ğŸ”„ æµ‹è¯•è¿›è¡Œä¸­...</h5>
                    <p>æ­£åœ¨éªŒè¯å„é¡¹åŠŸèƒ½...</p>
                `;
            }
        }

        // æ·»åŠ æ—¥å¿—
        function addLog(message) {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            console.log(message);
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            addLog('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æµ‹è¯•...');

            // æµ‹è¯•1: æ£€æŸ¥Bootstrapæ˜¯å¦åŠ è½½
            if (typeof bootstrap !== 'undefined') {
                testResults.bootstrap = true;
                addLog('âœ… Bootstrap 5 å·²æ­£ç¡®åŠ è½½');
            } else {
                addLog('âŒ Bootstrap æœªåŠ è½½');
            }

            // æµ‹è¯•2: æ£€æŸ¥æ ‡ç­¾é¡µå…ƒç´ æ˜¯å¦å­˜åœ¨
            const tabElements = document.querySelectorAll('[data-bs-toggle="tab"]');
            if (tabElements.length > 0) {
                testResults.tabs = true;
                addLog(`âœ… å‘ç° ${tabElements.length} ä¸ªæ ‡ç­¾é¡µå…ƒç´ `);
            } else {
                addLog('âŒ æœªæ‰¾åˆ°æ ‡ç­¾é¡µå…ƒç´ ');
            }

            // æµ‹è¯•3: æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            tabElements.forEach(tab => {
                tab.addEventListener('shown.bs.tab', function (e) {
                    const target = e.target.getAttribute('data-bs-target');
                    addLog(`âœ… æ ‡ç­¾é¡µåˆ‡æ¢äº‹ä»¶è§¦å‘: ${target}`);

                    // æ˜¾ç¤ºåˆ‡æ¢æˆåŠŸæç¤º
                    const tabPane = document.querySelector(target);
                    if (tabPane) {
                        const alert = document.createElement('div');
                        alert.className = 'alert alert-success mt-2';
                        alert.innerHTML = `<strong>ğŸ‰ æˆåŠŸåˆ‡æ¢åˆ°: ${target}</strong>`;
                        alert.style.animation = 'fadeIn 0.5s ease-in';

                        // ç§»é™¤ä¹‹å‰çš„æç¤º
                        const oldAlert = tabPane.querySelector('.alert-success');
                        if (oldAlert) oldAlert.remove();

                        tabPane.appendChild(alert);

                        // 3ç§’åè‡ªåŠ¨ç§»é™¤æç¤º
                        setTimeout(() => {
                            alert.remove();
                        }, 3000);
                    }
                });
            });

            testResults.events = true;
            addLog('âœ… äº‹ä»¶ç›‘å¬å™¨å·²è®¾ç½®');

            // æ›´æ–°æµ‹è¯•çŠ¶æ€
            updateTestStatus();

            addLog('æµ‹è¯•å®Œæˆï¼');
        });

        // æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            addLog(`âŒ JavaScripté”™è¯¯: ${e.message}`);
            addLog(`ğŸ“ æ–‡ä»¶: ${e.filename}:${e.lineno}`);

            const statusDiv = document.getElementById('test-status');
            statusDiv.className = 'test-result error';
            statusDiv.innerHTML = `
                <h5>âŒ å‘ç°JavaScripté”™è¯¯</h5>
                <p><strong>é”™è¯¯:</strong> ${e.message}</p>
                <p><strong>ä½ç½®:</strong> ${e.filename}:${e.lineno}</p>
                <p class="mt-2">è¿™è¡¨æ˜Bootstrapæ ‡ç­¾é¡µä»ç„¶æœ‰é—®é¢˜ã€‚</p>
            `;
        });

        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);

        addLog('é”™è¯¯å¤„ç†å·²è®¾ç½®');
    </script>
</body>
</html>
